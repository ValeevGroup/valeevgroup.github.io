<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPQC: MPQC Object-Oriented Input</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPQC
   &#160;<span id="projectnumber">4.0.0-beta.1</span>
   </div>
   <div id="projectbrief">Massively Parallel Electronic Structure platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mpqcinp.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MPQC Object-Oriented Input </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MPQC is an object-oriented program that directly allows the user to specify objects that MPQC then manipulates to obtain molecular properties such as energies, forces, etc. This makes the input very flexible, but very complex. However, most calculations should be quite similar to the one of the examples given later in this chapter. The best way to get started is to use one of the test input files located in <code>tests/validation/reference/inputs</code> and modify it to meet your needs.</p>
<p>The object-oriented input format is described in the following sections:</p>
<ul>
<li>
<a class="el" href="mpqcinp.html#mpqcooover">Overview of the Object-Oriented Input</a> </li>
<li>
<a class="el" href="mpqcinp.html#mpqcoowalk">A Walk-Through of an Object-Oriented Input File</a> </li>
<li>
<a class="el" href="mpqcinp.html#mpqcoosamp">Sample Object-Oriented Input Files</a> </li>
<li>
<a class="el" href="mpqcinp.html#mpqcoononjson">Specifying MPQC Input in XML and INFO formats</a> </li>
</ul>
<h1><a class="anchor" id="mpqcooover"></a>
Overview of the Object-Oriented Input</h1>
<p>MPQC starts off by creating a <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> object that parses the input file specified on the command line. The MPQC input associates keywords with values. The values can be scalars, arrays, or groups of keyword/value pairs. The latter feature allows to create a hierarchy of keyword/value pairs so that each keyword has an absolute path describing its location in a hierarchy. The details of MPQC input are documented in the <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> documentation.</p>
<p>MPQC input can be specified in one of two industry-standard formats, JSON and XML, as well as the non-standard INFO format developed for the Boost.PropertyTree library. In practice we recommend using JSON since it is less verbose than XML and, unlike the INFO format, can be manipulated from most programming languages. Thus the rest of this document will focus on JSON only; <a class="el" href="mpqcinp.html#mpqcoononjson">Specifying MPQC Input in XML and INFO formats</a> illustrates the correspondence between JSON, XML, and INFO formats.</p>
<p>The keywords recognized by MPQC are located at the top prefix. That is, they must be nested between the top-level curly brakets. The primary keywords that MPQC will examine are given below. Most of these keywords specify objects, thus they will be groups of key-value pairs used to construct the objects by calling the corresponding <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructors. The <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructors are documented with the source code documentation for each class.</p>
<dl>
<dt><code>property</code></dt>
<dd>This keyword specifies the <a class="el" href="classmpqc_1_1_property.html">Property</a> object that will be evaluated by calling its <a class="el" href="classmpqc_1_1_property.html#a73eec77267b00f57b1f1888f1a7a698c" title="evaluates this object ">Property::evaluate()</a> method. The specialization of <a class="el" href="classmpqc_1_1_property.html">Property</a> that is most commonly used is <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a>, which computes a Taylor expansion of the molecular energy computed with a <a class="el" href="classmpqc_1_1_wavefunction.html">Wavefunction</a> object with respect to the nuclear coordinates. There is no default value for this keyword. </dd>
<dt><code>units</code></dt>
<dd><p class="startdd">This keyword specifies the units system to be used. The value of this keyword is a string that matches one of the values accepted by the <a class="el" href="classmpqc_1_1_unit_factory.html#a76ac4b223bd7ce280b4745e4a1c5384c">UnitFactory::set_default()</a> method. The default value is "2014CODATA", i.e., the 2014 CODATA revision of the fundamental constants is used.</p>
<p class="enddd"></p>
</dd>
</dl>
<p>There are also some utility keywords that tell mpqc some technical details about how to do the calculation: </p><dl>
<dt><code>debugger</code></dt>
<dd>This optional keyword gives a <a class="el" href="classmpqc_1_1_debugger.html">Debugger</a> object which can be used to help find the problem if MPQC encounters a catastrophic error. </dd>
</dl>
<h1><a class="anchor" id="mpqcoowalk"></a>
A Walk-Through of an Object-Oriented Input File</h1>
<p>This example input does a Hartree-Fock calculation on water. Following is the entire input, followed by a breakdown with descriptions.</p>
<div class="fragment"><div class="line">{</div><div class="line">  <span class="stringliteral">&quot;property&quot;</span> : {</div><div class="line">    <span class="stringliteral">&quot;type&quot;</span> : <span class="stringliteral">&quot;Energy&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;wfn&quot;</span> : <span class="stringliteral">&quot;$:wfn&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;wfn&quot;</span>:{</div><div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;RHF&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;molecule&quot;</span> : <span class="stringliteral">&quot;$:molecule&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;basis&quot;</span> : <span class="stringliteral">&quot;$:basis&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;molecule&quot;</span>: {</div><div class="line">    <span class="stringliteral">&quot;file_name&quot;</span>: <span class="stringliteral">&quot;water.xyz&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;basis&quot;</span>: {</div><div class="line">    <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;aug-cc-pVDZ&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;molecule&quot;</span>: <span class="stringliteral">&quot;$:molecule&quot;</span></div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> <br />
</p>
<p>First, we specify the molecular property object that MPQC will evaluate. MPQC looks for the target property object by looking up keyword <code>property</code>. This keyword is followed by a <code>:</code> and then several keyword-value pairs separated by commas and enclosed in a pair of matching curly brakets. The data between the brakets contain the information that will be given to the <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructor of the particular <a class="el" href="classmpqc_1_1_property.html">Property</a> specialization. But first MPQC wants to know which <a class="el" href="classmpqc_1_1_property.html">Property</a> specialization it's dealing with here: that's given by the value of keyword <code>type</code>, in this case it's <code>"Energy"</code>, which means this will be an object of class <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a> .</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;property&quot;</span>: {</div><div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;Energy&quot;</span>,</div></div><!-- fragment --><p> <br />
</p>
<p>String <code>"Energy"</code> is known as the <em>key</em> that globally identifies class <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a>, and every class that is constructible from a <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> input must have one. Note the comma after "Energy": it is used in JSON to separate syntactic elements like keyword-value pairs and keyword groups.</p>
<p>The rest of the keywords in this section are used by the <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructor of the <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a> class; these are listed in the documentation of the <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a> class. The only such keyword is <code>wfn</code>:</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;wfn&quot;</span>: <span class="stringliteral">&quot;$:wfn&quot;</span></div></div><!-- fragment --><p> <br />
</p>
<p>Note that the value of <code>wfn</code>, namely <code>$:wfn</code>, is actually a reference to a <a class="el" href="classmpqc_1_1_wavefunction.html">Wavefunction</a> object specification elsewhere else in the input file. The leading <code>$</code> indicates that this is a reference and the keyword following the <code>$</code> is the actual location of the <a class="el" href="classmpqc_1_1_wavefunction.html">Wavefunction</a> object specification. The <code>:</code> in front of the keyword means that the keyword is not relative to the current location in the input, but rather relative to the root of the tree of keywords (i.e., the top-level JSON curly brakets). (this reference could have been also written <em>relative</em> to the current position in the keyword hiearchy, as <code>$..:wfn</code>). Thus, this line grabs the Wavefuntion object that is specified later in the input file. <br />
</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>update when <a class="el" href="classmpqc_1_1_wavefunction_property.html" title="WavefunctionProperty computes a Taylor expansion of a molecular property using a visiting Wavefunctio...">WavefunctionProperty</a> parses <code>wfn</code> An interesting point is that if you look at the documentation for <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a>, you will see that it doesn't read <code>wfn</code> keyword. The <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructor of a derived class will typically call the base class <a class="el" href="classmpqc_1_1_key_val.html" title="KeyVal specifies C++ primitive data (booleans, integers, reals, string) and user-defined objects obta...">KeyVal</a> constructors, hence the derived class will examine all keywords of base classes. If you follow the base classes of <a class="el" href="classmpqc_1_1_energy.html" title="Taylor expansion of the molecular energy computed by a Wavefunction. ">Energy</a> up to the Properties class, you'll find that <code>wfn</code> is indeed read by the <a class="el" href="classmpqc_1_1_wavefunction_property.html" title="WavefunctionProperty computes a Taylor expansion of a molecular property using a visiting Wavefunctio...">WavefunctionProperty</a> class.</dd></dl>
<p>The specification of <code>properties</code> object is now complete and the keyword block closes by a curly braket, followed by a comma since more keywords follow:</p>
<div class="fragment"><div class="line">},</div></div><!-- fragment --><p> <br />
</p>
<p>Next we find the <code>"wfn"</code> keyword. It provides the object referred by the <code>property</code> object specification. It is a specialization of the (abstract) <a class="el" href="classmpqc_1_1_wavefunction.html">Wavefunction</a> class In this case we will do a spin-restricted Hartree-Fock calculation. That is done with an object of type RHF. Since MPQC will expect any specialization of the <a class="el" href="classmpqc_1_1_wavefunction.html">Wavefunction</a> class here, we must explicitly specify the object type by giving the <code>type</code> keyword:</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;wfn&quot;</span>: {</div><div class="line">  <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;RHF&quot;</span>,</div></div><!-- fragment --><p> <br />
</p>
<p>The rest of keywords in this section are examined by the base classes of RHF:</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;molecule&quot;</span> : <span class="stringliteral">&quot;$:molecule&quot;</span>,</div><div class="line"><span class="stringliteral">&quot;basis&quot;</span> : <span class="stringliteral">&quot;$:basis&quot;</span></div></div><!-- fragment --><p> <br />
</p>
<p>Specifically, the <code>molecule</code> keyword specifies the <a class="el" href="classmpqc_1_1_molecule.html" title="Molecule is a class which contains a vector of AtomBasedClusterables. ">Molecule</a> object for which to compute the RHF wave function, and the <code>basis</code> keyword specifies the Basis object which gives the Gaussian basis in which RHF wave function will be computed.</p>
<p>Once again, the values of these keywords are references to object specifications given below. Separate <a class="el" href="classmpqc_1_1_molecule.html" title="Molecule is a class which contains a vector of AtomBasedClusterables. ">Molecule</a> and Basis object specifications could have been placed here, but usually it is necessary that several objects refer to the exact same object, so that for example the changes to the <a class="el" href="classmpqc_1_1_molecule.html" title="Molecule is a class which contains a vector of AtomBasedClusterables. ">Molecule</a> object by an optimizer will be "seen" by the RHF object. This can only be done using references.</p>
<p>A curly braket closes the <code>wfn</code> object specification.</p>
<div class="fragment"><div class="line">},</div></div><!-- fragment --><p> <br />
</p>
<p>Next we find the <code>molecule</code> keyword that has been referred to by the <code>wfn</code> object. It specifies a <a class="el" href="classmpqc_1_1_molecule.html" title="Molecule is a class which contains a vector of AtomBasedClusterables. ">Molecule</a> object:</p>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;molecule&quot;</span>: {</div></div><!-- fragment --><p> <br />
</p>
<p>Since <a class="el" href="classmpqc_1_1_molecule.html" title="Molecule is a class which contains a vector of AtomBasedClusterables. ">Molecule</a> is a concrete class there is no need to give a <code>type</code> keyword here.</p>
<p>The atomic coordinates are specified by giving the name of a text file in the <a href="https://en.wikipedia.org/wiki/XYZ_file_format">XYZ format</a>. </p><div class="fragment"><div class="line">  <span class="stringliteral">&quot;file_name&quot;</span>: <span class="stringliteral">&quot;water.xyz&quot;</span></div><div class="line">},</div></div><!-- fragment --><p> <br />
</p>
<p>Next, a basis set object is given: </p><div class="fragment"><div class="line"><span class="stringliteral">&quot;basis&quot;</span>: {</div><div class="line">  <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;aug-cc-pVDZ&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;molecule&quot;</span>: <span class="stringliteral">&quot;$:molecule&quot;</span></div><div class="line">}</div></div><!-- fragment --><p> Keyword <code>name</code> specifies the basis set name, and keyword <code>molecule</code> specifies the atomic centers on which to place the basis functions. There is no <code>type</code> keyword here since Basis is a concrete class.</p>
<p>There is no comma after the closing curly braket since this is the last keyword group in the input file. Now we close off the top-level JSON group with a curly braket and we are finished.</p>
<div class="fragment"><div class="line">}</div></div><!-- fragment --><p> <br />
</p>
<h1><a class="anchor" id="mpqcoosamp"></a>
Sample Object-Oriented Input Files</h1>
<p>The easiest way to get started with mpqc is to start with one of sample inputs that most nearly matches your problem. The <code>src/bin/mpqc/samples</code> contains all of the sample inputs below:</p>
<ul>
<li>
none yet </li>
</ul>
<h1><a class="anchor" id="mpqcoononjson"></a>
Specifying MPQC Input in XML and INFO formats</h1>
<p>The correspondence between JSON, XML, and INFO formats is best demonstrated by example. The following JSON input (used as the example in <a class="el" href="mpqcinp.html#mpqcoowalk">A Walk-Through of an Object-Oriented Input File</a> )</p>
<div class="fragment"><div class="line">{</div><div class="line">  <span class="stringliteral">&quot;property&quot;</span> : {</div><div class="line">    <span class="stringliteral">&quot;type&quot;</span> : <span class="stringliteral">&quot;Energy&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;wfn&quot;</span> : <span class="stringliteral">&quot;$:wfn&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;wfn&quot;</span>:{</div><div class="line">    <span class="stringliteral">&quot;type&quot;</span>: <span class="stringliteral">&quot;RHF&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;molecule&quot;</span> : <span class="stringliteral">&quot;$:molecule&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;basis&quot;</span> : <span class="stringliteral">&quot;$:basis&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;molecule&quot;</span>: {</div><div class="line">    <span class="stringliteral">&quot;file_name&quot;</span>: <span class="stringliteral">&quot;water.xyz&quot;</span></div><div class="line">  },</div><div class="line">  <span class="stringliteral">&quot;basis&quot;</span>: {</div><div class="line">    <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;aug-cc-pVDZ&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;molecule&quot;</span>: <span class="stringliteral">&quot;$:molecule&quot;</span></div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p> is expressed in XML as </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div><div class="line">&lt;<span class="keyword">property</span>&gt;</div><div class="line">  &lt;type&gt;Energy&lt;/type&gt;</div><div class="line">  &lt;wfn&gt;$:wfn&lt;/wfn&gt;</div><div class="line">&lt;/<span class="keyword">property</span>&gt;</div><div class="line">&lt;wfn&gt;</div><div class="line">  &lt;type&gt;RHF&lt;/type&gt;</div><div class="line">  &lt;molecule&gt;$:molecule&lt;/molecule&gt;</div><div class="line">  &lt;basis&gt;$:basis&lt;/basis&gt;</div><div class="line">&lt;/wfn&gt;</div><div class="line">&lt;molecule&gt;</div><div class="line">  &lt;file_name&gt;water.xyz&lt;/file_name&gt;</div><div class="line">&lt;/molecule&gt;</div><div class="line">&lt;basis&gt;</div><div class="line">  &lt;name&gt;aug-cc-pVDZ&lt;/name&gt;</div><div class="line">  &lt;molecule&gt;$:molecule&lt;/molecule&gt;</div><div class="line">&lt;/basis&gt;</div></div><!-- fragment --><p> The same input is expressed in the INFO format as </p><div class="fragment"><div class="line"><span class="keyword">property</span> {</div><div class="line">  type Energy</div><div class="line">  wfn  $:wfn</div><div class="line">}</div><div class="line">wfn {</div><div class="line">  type RHF</div><div class="line">  molecule $:molecule</div><div class="line">  basis $:basis</div><div class="line">}</div><div class="line">molecule {</div><div class="line">  file_name water.xyz</div><div class="line">}</div><div class="line">basis {</div><div class="line">  name aug-cc-pVDZ</div><div class="line">  molecule $:molecule</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<hr>
<address>
<small>
Generated at Mon Aug 27 2018 08:29:38 for <a
href="http://www.mpqc.org">MPQC</a>
4.0.0-beta.1 using the documentation package <a
href="http://www.doxygen.org">Doxygen</a>
1.8.14.
</small>
</address>
</body>
</html>
